import{_ as C,u as S,J as T,g as y,cp as o,q as E,cq as N,s as P,cr as $,v as D,af as G,cs as J,ct as h,r as b,b as l,c as d,ch as v,e as k,H as V,I as F,d as _,w,m as O,cu as q,A as z,z as x,cv as L,f as R,n as H,E as a,D as p,cw as m,cx as g}from"./index-911a223c.js";const j={class:"ai-module-container"},K=["onClick"],Q={class:"item-text"},U={__name:"AIModuleButton",setup(W){const i=S(),u=T(),c=y(!1),r=y(!1),I=y([{label:"生成笔记",icon:o(E),type:"note"},{label:"生成白板",icon:o(N),type:"whiteboard"},{label:"生成表格",icon:o(P),type:"table"},{label:"生成脑图",icon:o($),type:"mindmap"},{label:"生成流程图",icon:o(D),type:"flowchart"},{label:"总结",icon:o(G),type:"summary"},{label:"翻译",icon:o(J),type:"translate"},{label:"AI聊天",icon:o(h),type:"chat"}]),A=()=>{c.value=!c.value,c.value&&(r.value=!1)},B=f=>{switch(c.value=!1,f.type){case"note":p.prompt("请输入笔记主题","生成笔记",{confirmButtonText:"生成",cancelButtonText:"取消",inputPattern:/^[\s\S]{1,100}$/,inputErrorMessage:"主题长度不能超过100个字符"}).then(async({value:s})=>{const n=m.service({lock:!0,text:"正在生成笔记内容，请稍候...",background:"rgba(0, 0, 0, 0.7)"});try{const t=[{role:"system",content:"请根据用户提供的主题生成一篇详细的笔记内容，内容要丰富、结构清晰。"},{role:"user",content:s}],e=await g.chat(t);e.code===200?(u.setGeneratedContent(e.data.content),a.success("笔记内容生成成功，正在进入编辑器..."),i.push("/notes/new")):a.error(e.message||"生成内容失败")}catch(t){console.error("AI生成内容失败:",t),a.error("AI生成内容失败，请稍后重试")}finally{n.close()}}).catch(()=>{});break;case"whiteboard":p.prompt("请输入白板主题","生成白板",{confirmButtonText:"生成",cancelButtonText:"取消",inputPattern:/^[\s\S]{1,100}$/,inputErrorMessage:"主题长度不能超过100个字符"}).then(async({value:s})=>{const n=m.service({lock:!0,text:"正在生成白板内容，请稍候...",background:"rgba(0, 0, 0, 0.7)"});try{const t=[{role:"system",content:"请根据用户提供的主题生成适合白板展示的内容，包括大纲、要点、图表建议等，内容要清晰简洁。"},{role:"user",content:s}],e=await g.chat(t);e.code===200?(u.setGeneratedContent(e.data.content),a.success("白板内容生成成功，正在进入编辑器..."),i.push("/whiteboards/new")):a.error(e.message||"生成内容失败")}catch(t){console.error("AI生成内容失败:",t),a.error("AI生成内容失败，请稍后重试")}finally{n.close()}}).catch(()=>{});break;case"table":p.prompt("请输入表格主题","生成表格",{confirmButtonText:"生成",cancelButtonText:"取消",inputPattern:/^[\s\S]{1,100}$/,inputErrorMessage:"主题长度不能超过100个字符"}).then(async({value:s})=>{const n=m.service({lock:!0,text:"正在生成表格内容，请稍候...",background:"rgba(0, 0, 0, 0.7)"});try{const t=[{role:"system",content:"请根据用户提供的主题生成表格内容，返回JSON格式，包含columns和rows字段。columns字段是列标题数组，rows字段是数据行数组。"},{role:"user",content:s}],e=await g.chat(t);e.code===200?(u.setGeneratedContent(e.data.content),a.success("表格内容生成成功，正在进入编辑器..."),i.push("/tables/new")):a.error(e.message||"生成内容失败")}catch(t){console.error("AI生成内容失败:",t),a.error("AI生成内容失败，请稍后重试")}finally{n.close()}}).catch(()=>{});break;case"mindmap":p.prompt("请输入脑图主题","生成脑图",{confirmButtonText:"生成",cancelButtonText:"取消",inputPattern:/^[\s\S]{1,100}$/,inputErrorMessage:"主题长度不能超过100个字符"}).then(async({value:s})=>{const n=m.service({lock:!0,text:"正在生成脑图内容，请稍候...",background:"rgba(0, 0, 0, 0.7)"});try{const t=[{role:"system",content:"请根据用户提供的主题生成脑图内容，返回JSON格式，包含nodes和edges字段。nodes字段是节点数组，每个节点包含id、label和position属性；edges字段是边数组，每个边包含from和to属性。"},{role:"user",content:s}],e=await g.chat(t);e.code===200?(u.setGeneratedContent(e.data.content),a.success("脑图内容生成成功，正在进入编辑器..."),i.push("/mindmaps/new")):a.error(e.message||"生成内容失败")}catch(t){console.error("AI生成内容失败:",t),a.error("AI生成内容失败，请稍后重试")}finally{n.close()}}).catch(()=>{});break;case"flowchart":p.prompt("请输入流程图主题","生成流程图",{confirmButtonText:"生成",cancelButtonText:"取消",inputPattern:/^[\s\S]{1,100}$/,inputErrorMessage:"主题长度不能超过100个字符"}).then(async({value:s})=>{const n=m.service({lock:!0,text:"正在生成流程图内容，请稍候...",background:"rgba(0, 0, 0, 0.7)"});try{const t=[{role:"system",content:'请根据用户提供的主题生成流程图内容，返回JSON格式，包含nodes和edges字段。nodes字段是对象，键为节点ID，值为节点对象，每个节点对象包含id、text、type、x和y属性，其中type属性表示节点类型（circle表示开始/结束节点，rect表示处理节点，diamond表示判断节点）；edges字段是对象，键为边ID，值为边对象，每个边对象包含id、source、target、type和text属性，其中text属性表示边的标签（如"是"、"否"）。请确保生成有意义的节点文本、正确的节点类型和合理的连接线，逻辑顺序正确。'},{role:"user",content:s}],e=await g.chat(t);e.code===200?(u.setGeneratedContent(e.data.content),a.success("流程图内容生成成功，正在进入编辑器..."),i.push("/flowcharts/new")):a.error(e.message||"生成内容失败")}catch(t){console.error("AI生成内容失败:",t),a.error("AI生成内容失败，请稍后重试")}finally{n.close()}}).catch(()=>{});break;case"summary":case"translate":r.value=!0;break;case"chat":r.value=!0;break;default:a.warning("功能开发中")}};return(f,s)=>{const n=b("el-icon"),t=b("el-button");return l(),d("div",j,[c.value?(l(),d("div",{key:0,class:v(["ai-function-menu",{show:c.value}])},[s[1]||(s[1]=k("div",{class:"menu-title"},"AI功能",-1)),(l(!0),d(V,null,F(I.value,(e,M)=>(l(),d("div",{key:M,class:"menu-item",onClick:X=>B(e)},[_(n,{class:"item-icon"},{default:w(()=>[(l(),O(q(e.icon)))]),_:2},1024),k("span",Q,z(e.label),1)],8,K))),128))],2)):x("",!0),r.value?(l(),d("div",{key:1,class:v(["ai-chat-panel",{show:r.value}])},[_(L,{onClose:s[0]||(s[0]=e=>r.value=!1)})],2)):x("",!0),_(t,{class:"ai-module-btn",type:"primary",onClick:A,icon:H(h)},{default:w(()=>[...s[2]||(s[2]=[R(" AI助手 ",-1)])]),_:1},8,["icon"])])}}},Z=C(U,[["__scopeId","data-v-a67d51e9"]]);export{Z as A};

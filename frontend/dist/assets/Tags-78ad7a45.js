import{t as m}from"./common-1e801628.js";import{_ as L,o as M,r as o,b as P,c as S,d as t,w as a,g as p,e as g,f as s,A as v,E as i,D as A}from"./index-7d284294.js";const I={class:"tags-page"},U={class:"card-header"},$={__name:"Tags",setup(z){const f=p([]),u=p(!1),r=p({name:""});async function _(){try{f.value=await m.getList()}catch(n){console.error("Load tags error:",n)}}function b(){r.value={name:""},u.value=!0}async function w(){if(!r.value.name.trim()){i.warning("请输入标签名称");return}try{await m.create({name:r.value.name}),i.success("创建成功"),u.value=!1,_()}catch(n){console.error("Submit tag error:",n),i.error("创建失败")}}async function y(n){try{await A.confirm("确定要删除这个标签吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await m.delete(n),i.success("删除成功"),_()}catch(e){e!=="cancel"&&console.error("Delete tag error:",e)}}function x(n){return n?new Date(n).toLocaleString("zh-CN"):""}return M(()=>{_()}),(n,e)=>{const V=o("Plus"),C=o("el-icon"),d=o("el-button"),k=o("el-tag"),c=o("el-table-column"),T=o("el-table"),B=o("el-card"),D=o("el-input"),h=o("el-form-item"),E=o("el-form"),N=o("el-dialog");return P(),S("div",I,[t(B,null,{header:a(()=>[g("div",U,[e[4]||(e[4]=g("span",null,"标签管理",-1)),t(d,{type:"primary",onClick:b},{default:a(()=>[t(C,null,{default:a(()=>[t(V)]),_:1}),e[3]||(e[3]=s(" 新建标签 ",-1))]),_:1})])]),default:a(()=>[t(T,{data:f.value,style:{width:"100%"}},{default:a(()=>[t(c,{prop:"name",label:"标签名称","min-width":"200"},{default:a(({row:l})=>[t(k,null,{default:a(()=>[s(v(l.name),1)]),_:2},1024)]),_:1}),t(c,{prop:"created_at",label:"创建时间",width:"180"},{default:a(({row:l})=>[s(v(x(l.created_at)),1)]),_:1}),t(c,{label:"操作",width:"150",fixed:"right"},{default:a(({row:l})=>[t(d,{link:"",type:"danger",onClick:j=>y(l.id)},{default:a(()=>[...e[5]||(e[5]=[s("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),t(N,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l),title:"新建标签",width:"500px"},{footer:a(()=>[t(d,{onClick:e[1]||(e[1]=l=>u.value=!1)},{default:a(()=>[...e[6]||(e[6]=[s("取消",-1)])]),_:1}),t(d,{type:"primary",onClick:w},{default:a(()=>[...e[7]||(e[7]=[s("确定",-1)])]),_:1})]),default:a(()=>[t(E,{model:r.value,"label-width":"80px"},{default:a(()=>[t(h,{label:"标签名称"},{default:a(()=>[t(D,{modelValue:r.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.name=l),placeholder:"请输入标签名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},G=L($,[["__scopeId","data-v-5b160588"]]);export{G as default};

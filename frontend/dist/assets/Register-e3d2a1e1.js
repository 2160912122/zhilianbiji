import{_ as b,u as x,a as R,r as i,b as k,c as P,e as t,d as s,w as o,h as U,g as f,i as z,j as C,f as g,E as h}from"./index-86929dc7.js";const E={class:"register-container"},q={class:"register-box"},B={class:"register-footer"},M={__name:"Register",setup(N){const _=x(),c=R(),d=f(null),u=f(!1),r=z({username:"",email:"",password:"",confirmPassword:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名至少3个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少6个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(p,e,l)=>{e!==r.password?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}]};async function m(){if(d.value)try{await d.value.validate(),u.value=!0,await c.register({username:r.username,email:r.email,password:r.password}),h.success("注册成功，请登录"),_.push("/login")}catch(p){console.error("Register error:",p)}finally{u.value=!1}}return(p,e)=>{const l=i("el-input"),n=i("el-form-item"),v=i("el-button"),V=i("el-form"),y=i("router-link");return k(),P("div",E,[t("div",q,[e[7]||(e[7]=t("div",{class:"register-header"},[t("h1",null,"注册账号"),t("p",null,"智联笔记系统")],-1)),s(V,{ref_key:"formRef",ref:d,model:r,rules:w,class:"register-form",onSubmit:U(m,["prevent"])},{default:o(()=>[s(n,{prop:"username"},{default:o(()=>[s(l,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(n,{prop:"email"},{default:o(()=>[s(l,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.email=a),placeholder:"请输入邮箱（可选）",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:o(()=>[s(l,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{prop:"confirmPassword"},{default:o(()=>[s(l,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.confirmPassword=a),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:C(m,["enter"])},null,8,["modelValue"])]),_:1}),s(n,null,{default:o(()=>[s(v,{type:"primary",size:"large",loading:u.value,style:{width:"100%"},onClick:m},{default:o(()=>[...e[4]||(e[4]=[g(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",B,[e[6]||(e[6]=t("span",null,"已有账号？",-1)),s(y,{to:"/login"},{default:o(()=>[...e[5]||(e[5]=[g("立即登录",-1)])]),_:1})])])])}}},L=b(M,[["__scopeId","data-v-0abaf9dd"]]);export{L as default};

import{_ as T,u as C,o as B,r as n,b as D,c as $,d as a,w as o,e as u,f as s,A as _,g as E,D as N,E as L}from"./index-911a223c.js";import{t as f}from"./editor-cbc213f0.js";const M={class:"tables-page"},P={class:"card-header"},V={class:"header-buttons"},A={__name:"Tables",setup(I){const m=C(),d=E([]);async function p(){try{const t=await f.getList();d.value=t.data||[]}catch(t){console.error("Load tables error:",t),d.value=[]}}function y(t){m.push(`/tables/${t}`)}async function g(t){try{await N.confirm("确定要删除这个表格吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await f.delete(t),L.success("删除成功"),p()}catch(e){e!=="cancel"&&console.error("Delete table error:",e)}}function v(t){return t?new Date(t).toLocaleString("zh-CN"):""}return B(()=>{p()}),(t,e)=>{const w=n("Plus"),h=n("el-icon"),i=n("el-button"),r=n("el-table-column"),k=n("el-table"),x=n("el-card");return D(),$("div",M,[a(x,null,{header:o(()=>[u("div",P,[e[2]||(e[2]=u("span",null,"表格列表",-1)),u("div",V,[a(i,{type:"primary",onClick:e[0]||(e[0]=l=>t.$router.push("/tables/new"))},{default:o(()=>[a(h,null,{default:o(()=>[a(w)]),_:1}),e[1]||(e[1]=s(" 新建表格 ",-1))]),_:1})])])]),default:o(()=>[a(k,{data:d.value,style:{width:"100%"}},{default:o(()=>[a(r,{prop:"title",label:"标题","min-width":"200"}),a(r,{label:"行列数",width:"120"},{default:o(({row:l})=>{var c,b;return[s(_(((c=l.rows)==null?void 0:c.length)||0)+" × "+_(((b=l.columns)==null?void 0:b.length)||0),1)]}),_:1}),a(r,{prop:"updated_at",label:"更新时间",width:"180"},{default:o(({row:l})=>[s(_(v(l.updated_at)),1)]),_:1}),a(r,{label:"操作",width:"200",fixed:"right"},{default:o(({row:l})=>[a(i,{link:"",type:"primary",onClick:c=>y(l.id)},{default:o(()=>[...e[3]||(e[3]=[s("编辑",-1)])]),_:1},8,["onClick"]),a(i,{link:"",type:"danger",onClick:c=>g(l.id)},{default:o(()=>[...e[4]||(e[4]=[s("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},S=T(A,[["__scopeId","data-v-d783bc82"]]);export{S as default};

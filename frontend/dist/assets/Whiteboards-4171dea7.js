import{_ as k,u as x,o as C,r as n,b as B,c as W,d as o,w as a,e as c,f as l,A as D,g as $,D as E,E as N}from"./index-86929dc7.js";import{w as _}from"./editor-d0af8eeb.js";const L={class:"whiteboards-page"},M={class:"card-header"},P={class:"header-buttons"},T={__name:"Whiteboards",setup(V){const p=x(),d=$([]);async function u(){try{const t=await _.getList();d.value=t.data||[]}catch(t){console.error("Load whiteboards error:",t),d.value=[]}}function b(t){p.push(`/whiteboards/${t}`)}async function f(t){try{await E.confirm("确定要删除这个白板吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.delete(t),N.success("删除成功"),u()}catch(e){e!=="cancel"&&console.error("Delete whiteboard error:",e)}}function m(t){return t?new Date(t).toLocaleString("zh-CN"):""}return C(()=>{u()}),(t,e)=>{const h=n("Plus"),w=n("el-icon"),i=n("el-button"),s=n("el-table-column"),y=n("el-table"),v=n("el-card");return B(),W("div",L,[o(v,null,{header:a(()=>[c("div",M,[e[2]||(e[2]=c("span",null,"白板列表",-1)),c("div",P,[o(i,{type:"primary",onClick:e[0]||(e[0]=r=>t.$router.push("/whiteboards/new"))},{default:a(()=>[o(w,null,{default:a(()=>[o(h)]),_:1}),e[1]||(e[1]=l(" 新建白板 ",-1))]),_:1})])])]),default:a(()=>[o(y,{data:d.value,style:{width:"100%"}},{default:a(()=>[o(s,{prop:"title",label:"标题","min-width":"200"}),o(s,{prop:"room_key",label:"房间号",width:"150"}),o(s,{prop:"updated_at",label:"更新时间",width:"180"},{default:a(({row:r})=>[l(D(m(r.updated_at)),1)]),_:1}),o(s,{label:"操作",width:"200",fixed:"right"},{default:a(({row:r})=>[o(i,{link:"",type:"primary",onClick:g=>b(r.id)},{default:a(()=>[...e[3]||(e[3]=[l("编辑",-1)])]),_:1},8,["onClick"]),o(i,{link:"",type:"danger",onClick:g=>f(r.id)},{default:a(()=>[...e[4]||(e[4]=[l("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},z=k(T,[["__scopeId","data-v-8b6a5260"]]);export{z as default};

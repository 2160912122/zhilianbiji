import{_ as x,u as C,o as B,r,b as W,c as D,d as o,w as a,e as c,f as l,A as E,g as $,D as A,E as _}from"./index-911a223c.js";import{w as p}from"./editor-cbc213f0.js";const N={class:"whiteboards-page"},L={class:"card-header"},M={class:"header-buttons"},P={__name:"Whiteboards",setup(T){const b=C(),d=$([]);async function u(){try{const t=await p.getList();console.log("加载白板列表结果:",t),d.value=t.code===200&&Array.isArray(t.data)?t.data:[]}catch(t){console.error("Load whiteboards error:",t),d.value=[]}}function f(t){b.push(`/whiteboards/${t}`)}async function m(t){try{await A.confirm("确定要删除这个白板吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await p.delete(t);if(console.log("删除白板结果:",e),e.code===200)_.success("删除成功"),u();else throw new Error(e.message||"删除失败")}catch(e){e!=="cancel"&&(console.error("Delete whiteboard error:",e),_.error("删除失败: "+(e.message||"服务器错误")))}}function h(t){return t?new Date(t).toLocaleString("zh-CN"):""}return B(()=>{u()}),(t,e)=>{const w=r("Plus"),y=r("el-icon"),i=r("el-button"),s=r("el-table-column"),g=r("el-table"),v=r("el-card");return W(),D("div",N,[o(v,null,{header:a(()=>[c("div",L,[e[2]||(e[2]=c("span",null,"白板列表",-1)),c("div",M,[o(i,{type:"primary",onClick:e[0]||(e[0]=n=>t.$router.push("/whiteboards/new"))},{default:a(()=>[o(y,null,{default:a(()=>[o(w)]),_:1}),e[1]||(e[1]=l(" 新建白板 ",-1))]),_:1})])])]),default:a(()=>[o(g,{data:d.value,style:{width:"100%"}},{default:a(()=>[o(s,{prop:"title",label:"标题","min-width":"200"}),o(s,{prop:"room_key",label:"房间号",width:"150"}),o(s,{prop:"updated_at",label:"更新时间",width:"180"},{default:a(({row:n})=>[l(E(h(n.updated_at)),1)]),_:1}),o(s,{label:"操作",width:"200",fixed:"right"},{default:a(({row:n})=>[o(i,{link:"",type:"primary",onClick:k=>f(n.id)},{default:a(()=>[...e[3]||(e[3]=[l("编辑",-1)])]),_:1},8,["onClick"]),o(i,{link:"",type:"danger",onClick:k=>m(n.id)},{default:a(()=>[...e[4]||(e[4]=[l("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},z=x(P,[["__scopeId","data-v-023cb6c9"]]);export{z as default};

import{_ as M,u as C,o as B,r as s,b as D,c as $,d as n,w as a,e as c,f as l,A as u,g as E,D as N,E as L}from"./index-86929dc7.js";import{m as _}from"./editor-d0af8eeb.js";const P={class:"mindmaps-page"},T={class:"card-header"},V={class:"header-buttons"},A={__name:"Mindmaps",setup(I){const m=C(),d=E([]);async function p(){try{const t=await _.getList();d.value=t.data||[]}catch(t){console.error("Load mindmaps error:",t),d.value=[]}}function f(t){m.push(`/mindmaps/${t}`)}async function y(t){try{await N.confirm("确定要删除这个脑图吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.delete(t),L.success("删除成功"),p()}catch(e){e!=="cancel"&&console.error("Delete mindmap error:",e)}}function b(t){return t?new Date(t).toLocaleString("zh-CN"):""}return B(()=>{p()}),(t,e)=>{const g=s("Plus"),v=s("el-icon"),r=s("el-button"),i=s("el-table-column"),w=s("el-tag"),h=s("el-table"),k=s("el-card");return D(),$("div",P,[n(k,null,{header:a(()=>[c("div",T,[e[2]||(e[2]=c("span",null,"脑图列表",-1)),c("div",V,[n(r,{type:"primary",onClick:e[0]||(e[0]=o=>t.$router.push("/mindmaps/new"))},{default:a(()=>[n(v,null,{default:a(()=>[n(g)]),_:1}),e[1]||(e[1]=l(" 新建脑图 ",-1))]),_:1})])])]),default:a(()=>[n(h,{data:d.value,style:{width:"100%"}},{default:a(()=>[n(i,{prop:"title",label:"标题","min-width":"200"}),n(i,{prop:"is_public",label:"公开",width:"80"},{default:a(({row:o})=>[n(w,{type:o.is_public?"success":"info"},{default:a(()=>[l(u(o.is_public?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),n(i,{prop:"updated_at",label:"更新时间",width:"180"},{default:a(({row:o})=>[l(u(b(o.updated_at)),1)]),_:1}),n(i,{label:"操作",width:"200",fixed:"right"},{default:a(({row:o})=>[n(r,{link:"",type:"primary",onClick:x=>f(o.id)},{default:a(()=>[...e[3]||(e[3]=[l("编辑",-1)])]),_:1},8,["onClick"]),n(r,{link:"",type:"danger",onClick:x=>y(o.id)},{default:a(()=>[...e[4]||(e[4]=[l("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},S=M(A,[["__scopeId","data-v-7d9ad048"]]);export{S as default};
